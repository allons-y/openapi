openapi: 3.0.0
info:
  title: Markdown generator demo
  version: 1.0.0
  description: |
    A spec to demonstrate the markdown generator.

    All swagger fields supported by the doc generator are examplified below.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  contact:
    name: fred
    url: https://github.com/go-swagger/go-swagger
    email: fred@example.com
externalDocs:
  description: More information
  url: https://goswagger.io
tags:
  - name: greeters
    description: define several ways to greet someone
    externalDocs:
      url: https://welcome.example.com/greet
  - name: ousters
    description: define several ways to (tactfully) get rid of someone
    externalDocs:
      description: more about ousters
      url: https://welcome.example.com/oust
security:
  - password: []
  - api_key: []
x-schemes:
  - unix
  - wss
paths:
  /greetings:
    parameters:
      - in: query
        name: filter
        schema:
          type: string
          default: none
      - in: query
        name: since
        schema:
          type: string
          format: date-time
      - in: query
        name: max
        schema:
          type: integer
          default: 100
      - in: query
        name: offset
        schema:
          type: integer
          format: int32
          default: 0
      - in: query
        name: byID
        schema:
          type: string
          format: uuid
      - in: query
        description: specifies multiple outputs
        name: multi
        style: pipeDelimited
        schema:
          type: array
          items:
            type: string
            format: byte
    get:
      tags:
        - greeters
      summary: |
        Retrieve all ways to say hello
      description: |
        Retrieve greeters according to language or other optional filter
      externalDocs:
        description: More here
        url: https://www.greetings.io/greeters
      parameters:
        - in: query
          description: a filter on the language
          name: language
          schema:
            type: string
      responses:
        "200":
          description: A hello world collection
          headers:
            x-rate-limit:
              description: The number of allowed requests in the current period
              schema:
                type: integer
                default: 50
            x-max-items:
              description: The maximum number of returned items
              schema:
                type: integer
                default: 1024
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/greeter"
              examples:
                response:
                  value:
                    id: xyz
                    name: hello
                    language: en
                    strength: 3
            text/plain:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/greeter"
              examples:
                response:
                  value: >
                    '{"id": "xyz", "name": "hello", "language": "en",
                    "strength": 3}'
    post:
      tags:
        - greeters
      summary: Makes a greeter
      description: |
        Builds a new greeter from a description
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/greeter"
          text/plain:
            schema:
              $ref: "#/components/schemas/greeter"
        description: The description of the new greeter
        required: true
      responses:
        "201":
          description: Created
    put:
      tags:
        - greeters
      summary: Updates a greeter
      x-schemes:
        - unix
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/greeter"
      responses:
        "200":
          description: Modified
          content:
            application/json:
              schema:
                description: |
                  When modifiying things, a report about the actual
                  updates performed is returned.
                type: array
                items:
                  description: Modification report item
                  externalDocs:
                    description: A modification report
                    url: https://www.greetings.io/reports
                  type: object
                  required:
                    - id
                    - modified
                  properties:
                    id:
                      type: string
                    modified:
                      type: boolean
        "204":
          description: Nothing done
          content:
            application/json:
              schema:
                externalDocs:
                  description: Inline reliased primitive test
                  url: https://www.greetings.io/realiased
                type: array
                items:
                  $ref: "#/components/schemas/realiased"
  /oustings:
    parameters:
      - in: query
        name: filters
        style: pipeDelimited
        schema:
          type: array
          items:
            type: string
    get:
      tags:
        - ousters
      summary: |
        Retrieve all ways to say goodbye
      description: |
        Retrieve ousters according to language or other optional filter
      externalDocs:
        description: More here
        url: https://www.greetings.io/ousters
      parameters:
        - in: query
          description: a filter on the harshness of the ousting
          name: severity
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: Farewell messages
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ouster"
            text/plain:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ouster"
  /all:
    get:
      summary: Retrieve all things
      security:
        - token:
            - read:greeters
      responses:
        "200":
          description: All in one
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/anyObject"
  /some:
    get:
      summary: Retrieve some things
      responses:
        "200":
          description: some items
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/aliasedArray"
        "203":
          description: nested items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/aliasedArray"
    post:
      summary: Make some things
      description: |
        A more long-winded version on how to make things.
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
                format: uuid
        description: an inlined primitive body param
        required: true
      responses:
        "201":
          description: uuid created
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
    put:
      summary: Modify some things
      requestBody:
        content:
          application/json:
            schema:
              externalDocs:
                description: an inlined complex body param
                url: https://www.greetings.io/models/zzz
              type: object
              required:
                - z
              properties:
                z:
                  type: string
                  format: uuid
                  example: c6bcc97c-a363-4bd0-9ded-8874e6616206
                zz:
                  type: integer
                  format: int32
                  default: 15
                  example: 20
        required: true
      responses:
        "201":
          description: additional properties
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        default:
          description: default response
          content:
            application/json:
              schema:
                type: array
                items:
                  externalDocs:
                    description: generic error
                    url: https://www.greetings.io/models/errors-generic
                  type: object
                  required:
                    - code
                  properties:
                    code:
                      type: integer
                    message:
                      type: string
                  additionalProperties:
                    type: string
  /more:
    get:
      summary: Retrieve more things
      responses:
        "200":
          description: more items
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                  format: byte
    put:
      requestBody:
        content:
          application/json:
            schema:
              description: define an inlined map
              externalDocs:
                description: an inlined map body param
                url: https://www.greetings.io/models/map-uuid
              type: object
              additionalProperties:
                type: string
                format: uuid
        required: true
      responses:
        "201":
          description: object with additional properties
          content:
            application/json:
              schema:
                type: object
                description: define an inlined object with additionalProperties
                required:
                  - a
                properties:
                  a:
                    $ref: "#/components/schemas/greeter"
                additionalProperties: true
        "204":
          description: map of defined model
          content:
            application/json:
              schema:
                type: object
                description: define a map of a model type
                additionalProperties:
                  $ref: "#/components/schemas/greeter"
        "401":
          description: map with additionalProperties
          content:
            application/json:
              schema:
                type: object
                description: define a map of objects with additional properties
                additionalProperties:
                  type: object
                  description: property of map container
                  properties:
                    b:
                      type: integer
                  additionalProperties: true
        "403":
          description: map with constrained additionalProperties
          content:
            application/json:
              schema:
                type: object
                description: define a map of objects with constrained additional properties
                additionalProperties:
                  type: object
                  description: property of constrained map container
                  properties:
                    b:
                      type: integer
                  additionalProperties:
                    type: array
                    items:
                      type: object
                      properties:
                        c:
                          type: integer
                      additionalProperties: true
    delete:
      requestBody:
        content:
          application/json:
            schema:
              description: define an inlined map
              externalDocs:
                description: an inlined map body param, from model
                url: https://www.greetings.io/models/map-model
              type: object
              additionalProperties:
                $ref: "#/components/schemas/greeter"
        required: true
      responses:
        "204":
          description: empty
        "401":
          description: complex object
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/objectWithComplexProps"
components:
  securitySchemes:
    api_key:
      type: apiKey
      description: Authentication via API key header
      name: x-api-key
      in: header
    password:
      type: http
      description: Authentication with password
      scheme: basic
    token:
      type: oauth2
      description: Authentication with oauth2 token
      flows:
        authorizationCode:
          authorizationUrl: https://app/auth/authorize
          tokenUrl: https://app/auth/token
          scopes:
            read:greeters: Scope to access all greeters
            write:greeters: Scope to create or modify greeters
  schemas:
    greeter:
      externalDocs:
        description: more about greeters
        url: https://www.greetings.io/models/greeter
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          externalDocs:
            url: https://www.greetings.io/models/uniqueIDs
          example: xyz
        name:
          type: string
          example: hello
        language:
          type: string
          example: en
        strength:
          type: integer
          format: int32
          default: 0
          example: 3
    ouster:
      type: object
      required:
        - uid
        - uname
      properties:
        uid:
          type: string
          format: uuid
        uname:
          type: string
    anyObject:
      description: a type composition
      externalDocs:
        description: any kind of greeter or ouster
        url: https://www.greetings.io/models/anyObject
      allOf:
        - $ref: "#/components/schemas/greeter"
        - $ref: "#/components/schemas/ouster"
    aliasedArray:
      type: array
      items:
        type: string
        format: uuid
    anonymousAllOf:
      allOf:
        - type: object
          properties:
            a:
              description: the first letter of the alphabet
              type: string
              default: A
              example: a
        - type: object
          required:
            - b
          properties:
            b:
              type: string
    primitiveAllOf:
      allOf:
        - type: string
        - type: string
          format: uuid
    primitive:
      type: string
      enum:
        - a
        - b
        - c
    intPrimitive:
      type: integer
      format: int32
      enum:
        - 1
        - 2
        - 3
    realiased:
      $ref: "#/components/schemas/primitive"
    objectWithComplexProps:
      type: object
      required:
        - prop1
        - prop2
      properties:
        prop1:
          $ref: "#/components/schemas/greeter"
        prop2:
          $ref: "#/components/schemas/ouster"
        prop3:
          $ref: "#/components/schemas/realiased"
        prop4:
          type: object
          properties:
            a:
              type: string
          additionalProperties:
            type: integer
        prop5:
          type: array
          items:
            type: object
            properties:
              b:
                type: string
                format: uuid
            additionalProperties:
              type: integer
              default: 28
              example: 14
        prop6:
          type: array
          items:
            anyOf:
              - type: integer
                description: first member integer
                default: 15
                example: 29
              - type: string
                description: second member string
                default: xyz
          additionalItems:
            $ref: "#/components/schemas/greeter"
        prop7:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/greeter"
              - $ref: "#/components/schemas/ouster"
          additionalItems:
            type: string
        prop8:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/greeter"
              - $ref: "#/components/schemas/ouster"
              - type: integer
          additionalItems:
            type: object
            additionalProperties: true
