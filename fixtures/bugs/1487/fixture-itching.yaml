openapi: 3.0.0
info:
  version: 1.0.0
  title: fixture for additionalProperties
  description: >
    This one regroups a number of itching cases, essentially around
    additionalProperties.

    In particular, we test some things with empty objects (no properties) which have additionalProperties of diverse sorts.

    We also added here some funny models using the special types Files, string format: binary and interface{}

    These special cases do not correspond to actual API specs: we use them to verify the internal behavior of the general.
paths:
  /models:
    get:
      operationId: modelOp
      summary: many model variations
      description: Used to see if a codegen can render all the possible enum categories
      tags:
        - testcgen
      responses:
        default:
          description: Generic Out
components:
  schemas:
    emptyObjectWithAdditionalSlice:
      type: object
      additionalProperties:
        type: array
        items:
          type: object
          properties:
            dummyProp1:
              type: string
              format: date
    emptyObjectWithAdditionalNestedSlice:
      type: object
      additionalProperties:
        type: array
        items:
          type: array
          items:
            type: array
            items:
              type: object
              properties:
                dummyProp1:
                  type: string
                  format: date
    aliasedThing:
      type: object
      properties:
        prop1:
          type: string
          format: date
    nullableThing:
      type: string
      format: date
      nullable: true
    emptyObjectWithAdditionalAlias:
      type: object
      additionalProperties:
        $ref: "#/components/schemas/aliasedThing"
    emptyObjectWithAdditionalNullable:
      type: object
      additionalProperties:
        $ref: "#/components/schemas/nullableThing"
    objectWithEmptyObject:
      type: object
      properties:
        nonEmptyObj:
          $ref: "#/components/schemas/nullableThing"
        emptyObj:
          $ref: "#/components/schemas/emptyObjectWithAdditionalAlias"
    emptyObjectWithAdditionalNullablePrimitive:
      type: object
      additionalProperties:
        type: string
        format: date
        nullable: true
    emptyObjectWithAdditionalNonNullablePrimitive:
      type: object
      additionalProperties:
        type: string
        format: date
    notValidatedAdditionalProps:
      type: object
      properties:
        prop2:
          type: string
          format: uuid
      additionalProperties:
        type: object
        additionalProperties:
          type: object
          additionalProperties:
            type: string
    notValidatedAdditionalPropsSlice:
      type: object
      properties:
        prop2:
          type: string
          format: uuid
      additionalProperties:
        type: array
        items:
          additionalProperties:
            type: object
            additionalProperties:
              type: string
    notValidatedAtAll:
      type: object
      properties:
        prop2:
          type: string
      additionalProperties:
        type: array
        items:
          additionalProperties:
            type: object
            additionalProperties:
              type: string
    enumsWithAdditionalProps:
      type: object
      enum:
        - '{ "a": 1, "b": 2 }'
        - '{ "a": 3, "b": 4 }'
      additionalProperties:
        type: object
        enum:
          - '{ "b": 2 }'
          - '{ "b": 4 }'
    goodOldFormatIssue:
      type: object
      required:
        - myFile
      properties:
        myFile:
          type: string
          format: binary
        anotherFile:
          type: string
          format: binary
        alternateFile:
          type: string
          format: binary
        thisAliasedFile:
          $ref: "#/components/schemas/aliasedFile"
        thisNullableAliasedFile:
          $ref: "#/components/schemas/aliasedNullableFile"
        thisAlternateAliasedFile:
          $ref: "#/components/schemas/aliasedTypeFile"
        thisNullableAlternateAliasedFile:
          $ref: "#/components/schemas/aliasedTypeNullableFile"
        myBytes:
          type: string
          format: byte
    sliceOfAliasedFiles:
      type: array
      minItems: 4
      items:
        $ref: "#/components/schemas/aliasedFile"
    additionalFile:
      type: object
      properties:
        dirName:
          type: string
      additionalProperties:
        type: string
        format: binary
    aliasedFile:
      type: string
      format: binary
    aliasedTypeFile:
      type: string
      format: binary
    aliasedNullableFile:
      type: string
      format: binary
      nullable: true
    aliasedTypeNullableFile:
      type: string
      nullable: true
      format: binary
    topLevelFormatIssue:
      type: object
      properties:
        myFile:
          type: string
          format: binary
        myAlternateFile:
          type: string
          format: binary
