openapi: 3.0.0
info:
  version: 1.0.0
  title: fixture for nested allOf with ref
  description: >
    We check that validation bubbles up properly, with various compounds of 

    complex structures, as well as no validation is generated when not necessary.
paths:
  /models:
    get:
      operationId: modelOp
      summary: many model variations
      description: Used to see if a codegen can render all the possible enum categories
      responses:
        default:
          description: Generic Out
components:
  schemas:
    sliceOfAllOf:
      type: array
      uniqueItems: true
      items:
        allOf:
          - type: object
            properties:
              prop0:
                type: string
                format: uuid
          - $ref: "#/components/schemas/sliceOfInterfaces"
    sliceOfInterfaces:
      type: array
      items:
        type: object
        additionalProperties: true
    sliceOfInterfacesWithValidation:
      type: array
      maxItems: 10
      items:
        type: object
        additionalProperties: true
    allOfAliases:
      allOf:
        - $ref: "#/components/schemas/aliasedDate"
        - $ref: "#/components/schemas/aliasedNullableDate"
    allOfSlicesOfAliases:
      type: object
      allOf:
        - type: object
          properties:
            prop1:
              type: array
              maxItems: 10
              items:
                $ref: "#/components/schemas/aliasedDate"
        - type: object
          properties:
            prop2:
              type: array
              maxItems: 20
              items:
                $ref: "#/components/schemas/aliasedNullableDate"
    sliceMix:
      allOf:
        - $ref: "#/components/schemas/sliceOfAllOf"
        - $ref: "#/components/schemas/sliceOfInterfaces"
    objectMix:
      allOf:
        - type: object
        - type: object
          properties:
            prop1:
              allOf:
                - $ref: "#/components/schemas/aliasedDate"
                - $ref: "#/components/schemas/aliasedNullableDate"
        - type: object
          properties:
            prop2:
              allOf:
                - $ref: "#/components/schemas/aliasedDate"
                - $ref: "#/components/schemas/aliasedNullableDate"
    aliasedDate:
      type: string
      format: date
    aliasedNullableDate:
      type: string
      format: date
      nullable: true
