openapi: 3.0.0
info:
  version: 1.0.0
  title: check validation codegen on polymorphic types
  description: various patterns of polymorphic types with or without validation
paths:
  /models:
    get:
      operationId: modelOp
      summary: many model variations
      description: no description
      tags:
        - testcgen
      responses:
        default:
          description: Generic Out
components:
  schemas:
    MapOfNodes:
      type: object
      additionalProperties:
        $ref: "#/components/schemas/Node"
    Graph:
      type: object
      properties:
        Nodes:
          type: array
          items:
            $ref: "#/components/schemas/Node"
    SmallGraph:
      type: object
      properties:
        Nodes:
          maxItems: 10
          type: array
          items:
            $ref: "#/components/schemas/Node"
    Node:
      type: object
      discriminator:
        propertyName: NodeType
      required:
        - NodeType
      properties:
        NodeType:
          type: string
        NodeSize:
          type: integer
          minimum: 0
    SmallNode:
      type: object
      discriminator:
        propertyName: NodeType
      required:
        - NodeType
      properties:
        NodeType:
          type: string
          maxLength: 255
    CodeBlockNode:
      allOf:
        - $ref: "#/components/schemas/Node"
        - properties:
            Code:
              type: string
    DocBlockNode:
      allOf:
        - $ref: "#/components/schemas/Node"
        - properties:
            Doc:
              type: string
              maxLength: 1000
    arrayOfBaseTypes:
      type: array
      items:
        $ref: "#/components/schemas/myBaseType"
    smallArrayOfBaseTypes:
      type: array
      maxItems: 12
      items:
        $ref: "#/components/schemas/myBaseType"
    tupleOfBaseTypes:
      type: array
      items:
        anyOf:
          - $ref: "#/components/schemas/mySubType1"
          - $ref: "#/components/schemas/mySubType2"
          - $ref: "#/components/schemas/myBaseType"
    mapOfBaseTypes:
      type: object
      properties:
        dummy:
          type: integer
          multipleOf: 10
      additionalProperties:
        $ref: "#/components/schemas/myBaseType"
    tupleWithAdditionalBaseTypes:
      type: array
      items:
        anyOf:
          - type: integer
            minimum: 100
          - $ref: "#/components/schemas/mySubType1"
          - $ref: "#/components/schemas/mySubType2"
      additionalItems:
        $ref: "#/components/schemas/myBaseType"
    mySubType1:
      allOf:
        - $ref: "#/components/schemas/myBaseType"
        - properties:
            subprop1:
              type: string
              format: date
    mySubType2:
      allOf:
        - $ref: "#/components/schemas/myBaseType"
        - type: object
          additionalProperties:
            $ref: "#/components/schemas/myBaseType"
    myBaseType:
      type: object
      discriminator:
        propertyName: myObjectType
      required:
        - myObjectType
      properties:
        myObjectType:
          type: string
        myObjectPrice:
          type: number
          minimum: 0
        myObjectResellers:
          type: array
          items:
            type: object
            required:
              - name
            properties:
              name:
                type: string
              address:
                type: string
      additionalProperties:
        type: array
        items:
          additionalProperties: true
