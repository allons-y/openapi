openapi: 3.0.0
info:
  version: 1.0.0
  title: broken code when using array of polymorphic type
  description: broken code produced on polymorphic type
paths:
  /models:
    get:
      operationId: modelOp
      summary: many model variations
      description: no description
      tags:
        - testcgen
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/sanityCheck"
      responses:
        default:
          description: Generic Out
components:
  schemas:
    sanityCheck:
      description: an extensible empty object
      type: object
      additionalProperties: true
    Graph:
      type: object
      properties:
        Nodes:
          type: array
          items:
            $ref: "#/components/schemas/Node"
    Node:
      type: object
      discriminator:
        propertyName: NodeType
      required:
        - NodeType
      properties:
        NodeType:
          type: string
    CodeBlockNode:
      allOf:
        - $ref: "#/components/schemas/Node"
        - properties:
            Code:
              type: string
    DocBlockNode:
      allOf:
        - $ref: "#/components/schemas/Node"
        - properties:
            Doc:
              type: string
