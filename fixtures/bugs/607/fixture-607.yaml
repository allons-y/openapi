openapi: 3.0.0
info:
  version: 1.0.0
  title: broken code when using array of polymorphic type
  description: broken code produced on polymorphic type
paths:
  /models:
    get:
      operationId: modelOp
      summary: many model variations
      description: no description
      tags:
        - testcgen
      responses:
        default:
          description: Generic Out
components:
  schemas:
    RangeFilter:
      allOf:
        - $ref: "#/components/schemas/Filter"
        - properties:
            config:
              properties:
                gt:
                  format: double
                  type: number
                gte:
                  format: double
                  type: number
                lt:
                  format: double
                  type: number
                lte:
                  format: double
                  type: number
              type: object
          required:
            - config
          type: object
    Filter:
      discriminator:
        propertyName: type
      properties:
        type:
          type: string
      required:
        - type
      type: object
    AndFilter:
      allOf:
        - $ref: "#/components/schemas/Filter"
        - properties:
            config:
              items:
                $ref: "#/components/schemas/Filter"
              type: array
          required:
            - config
          type: object
