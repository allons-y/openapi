openapi: 3.0.0
info:
  description: a spec for issue 319 on github
  title: bug 319
  version: 1.0.0
paths: {}
components:
  schemas:
    Base:
      description: Base class
      discriminator:
        propertyName: dType
      properties:
        dType:
          type: string
          description: discriminating type
      required:
        - dType
    Derived:
      description: Derived class
      allOf:
        - $ref: "#/components/schemas/Base"
        - required:
            - name
          properties:
            name:
              type: string
              description: name of the property
    Container:
      description: Container type
      properties:
        mapNoWorky:
          type: object
          additionalProperties:
            $ref: "#/components/schemas/Base"
      required:
        - mapNoWorky
