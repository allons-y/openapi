openapi: 3.0.0
info:
  version: 1.0.0
  title: conversions
  description: |
    An API with models to investigate specifically the impact of:
    * IsAnonymous
    * IsAliased
    * IsNullable

    and their impact on the calls to the Required() and ReadOnly() validations.
paths:
  /pets:
    post:
      summary: enter pet
      description: used to see if codegen can render required things with or without
        type conversion
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Pet"
      responses:
        default:
          description: Generic out
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Pet"
  /dogs:
    post:
      summary: enter dog
      description: used to see if codegen can render required things with or without
        type conversion
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Dog"
      responses:
        default:
          description: Generic out
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Pet"
  /dogs/kennel:
    get:
      summary: kennel status
      description: used to see if codegen can render required things with or without
        type conversion
      responses:
        "200":
          description: kennel
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Kennel"
  /cats:
    post:
      summary: enter cat
      description: used to see if codegen can render required things with or without
        type conversion
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Cat"
      responses:
        default:
          description: Generic out
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Cat"
components:
  schemas:
    PetKind:
      description: this string is going to have .IsAliased true
      type: string
      enum:
        - bird
        - fish
        - dog
        - cat
    PurchaseDate:
      type: string
      format: date-time
    Cat:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        breed:
          type: string
          enum:
            - siamese
            - burmese
            - chartreux
            - european
            - american
        siblings:
          type: array
          items:
            description: a sibling is a brother or sister of this cat and the rank among the
              siblings
            allOf:
              - type: object
                properties:
                  rank:
                    type: integer
                    minimum: 0
                required:
                  - rank
              - $ref: "#/components/schemas/Cat"
        care:
          type: array
          items:
            $ref: "#/components/schemas/ActionName"
          minItems: 1
        index:
          type: array
          items:
            type: integer
            minimum: 1
          minItems: 1
      required:
        - name
        - breed
      additionalProperties:
        type: object
        description: this map is anonymous
        properties:
          propertyID:
            type: string
            format: uuid
            readOnly: true
    Dog:
      description: Dog is going to be a subtype of Pet
      allOf:
        - $ref: "#/components/schemas/Pet"
        - type: object
          properties:
            id:
              type: integer
              format: int64
            kind:
              $ref: "#/components/schemas/PetKind"
            birthDate:
              type: string
              format: date
            purchasedOn:
              $ref: "#/components/schemas/PurchaseDate"
            breed:
              type: string
              enum:
                - beagle
                - boxer
                - bulldog
                - german shepherd
                - golden retriever
                - spaniel
                - terrier
            website:
              type: string
              format: hostname
              enum:
                - www.doggy.com
                - www.blog4dogs.com
                - www.friendly-rotweiler.org
          required:
            - id
            - name
            - kind
            - birthDate
            - breed
          additionalProperties:
            description: additional dates
            type: string
            format: date
            readOnly: true
    Kennel:
      description: kennel hosts dogs
      type: object
      properties:
        capacity:
          type: integer
          minimum: 0
        dogs:
          type: array
          items:
            $ref: "#/components/schemas/Dog"
          minItems: 0
          maxItems: 100
          uniqueItems: true
        maintenance:
          $ref: "#/components/schemas/ActionName"
        opening:
          $ref: "#/components/schemas/ActionName"
        actions:
          type: object
          additionalProperties:
            $ref: "#/components/schemas/ActionName"
        history:
          type: array
          items:
            $ref: "#/components/schemas/ActionName"
          maxItems: 512
          readOnly: true
        events:
          type: array
          items:
            $ref: "#/components/schemas/Event"
        eventsHistory:
          $ref: "#/components/schemas/History"
      required:
        - capacity
        - dogs
        - opening
        - actions
      additionalProperties:
        type: array
        items:
          $ref: "#/components/schemas/Event"
        maxItems: 512
        readOnly: true
    History:
      type: array
      items:
        $ref: "#/components/schemas/Event"
      maxItems: 512
      readOnly: true
    Event:
      type: string
      format: uuid
      readOnly: true
    Pet:
      description: Pet is going to be defined as an interface type
      type: object
      discriminator:
        propertyName: petType
      properties:
        name:
          type: string
        petType:
          type: string
      required:
        - name
        - petType
    ActionName:
      description: ActionName is going to be a type with .IsAliased true
      type: string
      minLength: 1
      readOnly: true
